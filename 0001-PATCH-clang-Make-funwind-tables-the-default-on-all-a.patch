From 4601b4f60b6224cf7fdca203dea75a22b7331125 Mon Sep 17 00:00:00 2001
From: serge-sans-paille <sguelton@redhat.com>
Date: Mon, 14 Nov 2022 11:04:27 +0000
Subject: [PATCH][clang] Make -funwind-tables the default on all archs

---
 clang/lib/Driver/ToolChains/Gnu.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/clang/lib/Driver/ToolChains/Gnu.cpp b/clang/lib/Driver/ToolChains/Gnu.cpp
index 8236451b96c8..0c05971429ce 100644
--- a/clang/lib/Driver/ToolChains/Gnu.cpp
+++ b/clang/lib/Driver/ToolChains/Gnu.cpp
@@ -2861,6 +2861,10 @@ Generic_GCC::getDefaultUnwindTableLevel(const ArgList &Args) const {
   case llvm::Triple::ppc64le:
   case llvm::Triple::x86:
   case llvm::Triple::x86_64:
+  // Enable -funwind-tables on all architectures supported by Fedora:
+  // rhbz#1655546
+  case llvm::Triple::systemz:
+  case llvm::Triple::arm:
     return UnwindTableLevel::Asynchronous;
   default:
     return UnwindTableLevel::None;
-- 
2.34.3

