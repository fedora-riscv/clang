# TODO REVIEW: better summary
summary: ""
test: "$WITH_SCL ./test.sh"
require:
  - glibc-devel
  - glibc-static
  - gcc
adjust:
  # Common requirements when LLVM is not SCL-ized
  - require+:
      - clang
      - lld
      - compiler-rt
    when: "collection is not defined"

  # Requirements for SCL-ized LLVM
  - require+:
      - llvm-toolset-13.0-clang
      - llvm-toolset-13.0-lld
      - llvm-toolset-13.0-compiler-rt
    when: "collection == llvm-toolset-13.0"

  - environment+:
      CXXLIB: "libc++"
    require+:
      - libcxx-devel
      - libcxx-static
    when: "distro == fedora"
    because: testing against libcxx package in Fedora

  - environment+:
      CXXLIB: "libstdc++"
    require:
      - libstdc++
    when: >-
      distro == rhel
      or distro == centos
    because: testing against libstdc++ package in RHEL as libcxx is not shipped with RHEL
