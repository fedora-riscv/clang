From 3003afd66e4ccabdc5b53e3b7d29cc6c0eb0174d Mon Sep 17 00:00:00 2001
From: serge-sans-paille <sguelton@redhat.com>
Date: Thu, 25 Feb 2021 14:09:29 +0100
Subject: [PATCH] Make -funwind-tables the default on all archs

---
 clang/lib/Driver/ToolChain.cpp      | 2 +-
 clang/lib/Driver/ToolChains/Gnu.cpp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/clang/lib/Driver/ToolChain.cpp b/clang/lib/Driver/ToolChain.cpp
index 6d9e31735843..c287384c11c1 100644
--- a/clang/lib/Driver/ToolChain.cpp
+++ b/clang/lib/Driver/ToolChain.cpp
@@ -288,7 +288,7 @@ std::string ToolChain::getInputFilename(const InputInfo &Input) const {
 }
 
 bool ToolChain::IsUnwindTablesDefault(const ArgList &Args) const {
-  return false;
+  return true;
 }
 
 Tool *ToolChain::getClang() const {
diff --git a/clang/lib/Driver/ToolChains/Gnu.cpp b/clang/lib/Driver/ToolChains/Gnu.cpp
index 34396b0b59c2..22c6cc03a4f0 100644
--- a/clang/lib/Driver/ToolChains/Gnu.cpp
+++ b/clang/lib/Driver/ToolChains/Gnu.cpp
@@ -2815,7 +2815,7 @@ bool Generic_GCC::IsUnwindTablesDefault(const ArgList &Args) const {
   case llvm::Triple::x86_64:
     return true;
   default:
-    return false;
+    return true;
   }
 }
 
-- 
2.36.1

